// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// User profile (extends auth.users in Supabase)
model Profile {
  id        String   @id
  email     String
  fullName  String?
  role      String   @default("user")
  avatarUrl String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  blogs     Blog[]
  media     Media[]
}

// Books/Ebooks
model Book {
  id            String   @id @default(cuid())
  title         String
  author        String
  description   String?
  coverUrl      String?
  fileUrl       String?
  fileType      String?  // 'pdf' | 'epub'
  category      String?
  isPublished   Boolean  @default(false)
  downloadCount Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

// Blog posts
model Blog {
  id              String   @id @default(cuid())
  title           String
  slug            String   @unique
  excerpt         String?
  content         String?
  coverImageUrl   String?
  metaTitle       String?
  metaDescription String?
  metaKeywords    String?
  authorId        String?
  isPublished     Boolean  @default(false)
  publishedAt     DateTime?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  author          Profile? @relation(fields: [authorId], references: [id])
}

// Media files
model Media {
  id           String   @id @default(cuid())
  filename     String
  originalName String?
  mimeType     String?
  size         Int?
  url          String
  altText      String?
  uploadedBy   String?
  createdAt    DateTime @default(now())

  uploader     Profile? @relation(fields: [uploadedBy], references: [id])
}

// Sponsors
model Sponsor {
  id            String   @id @default(cuid())
  name          String
  logoUrl       String?
  websiteUrl    String?
  description   String?
  isActive      Boolean  @default(true)
  displayOrder  Int      @default(0)
  clickCount    Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

// Contact form submissions
model ContactSubmission {
  id        String   @id @default(cuid())
  name      String
  email     String
  subject   String?
  message   String
  isRead    Boolean  @default(false)
  createdAt DateTime @default(now())
}
